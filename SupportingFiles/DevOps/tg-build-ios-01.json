{"tasks":[{"environment":{},"displayName":"Show SDK List","alwaysRun":false,"continueOnError":false,"condition":"succeeded()","enabled":true,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"inputs":{"targetType":"inline","filePath":"","arguments":"","script":"echo \"Checking SDKs\"\nXCODE_SDKS=$(xcodebuild -showsdks -json)\nPLATFORM_VERSION=\"\"\n\nwhile IFS= read -r LINE\ndo\n\tif [[ $LINE == *\"\\\"canonicalName\\\" : \\\"iphoneos\"* ]]; then\n\t\techo \"$LINE\"\n  \t\tPLATFORM_VERSION=$(echo $LINE | grep -Eo '[+-]?[0-9]+([.][0-9]+)?')\n\tfi\ndone < <(printf '%s\\n' \"$XCODE_SDKS\")\n\nif test -z \"$PLATFORM_VERSION\"; then\n\techo \"Could not found iOS SDK\"\nfi\n\necho \"iOS SDK $PLATFORM_VERSION found\"\n\nPLATFORM_SDK=\"iphoneos${PLATFORM_VERSION}\"\n\necho \"##vso[task.setvariable variable=IO_PLATFORM_SDK;]${PLATFORM_SDK}\"","workingDirectory":"","failOnStderr":"false","bashEnvValue":""},"task":{"id":"6c731c3c-3c68-459a-a5c9-bde6e6595b5b","versionSpec":"3.*","definitionType":"task"}},{"environment":{},"displayName":"Increase Version","alwaysRun":false,"continueOnError":false,"condition":"succeeded()","enabled":true,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"inputs":{"targetType":"inline","filePath":"","arguments":"","script":"agvtool new-version $(Build.BuildNumber) ","workingDirectory":"","failOnStderr":"false","bashEnvValue":""},"task":{"id":"6c731c3c-3c68-459a-a5c9-bde6e6595b5b","versionSpec":"3.*","definitionType":"task"}},{"environment":{},"displayName":"Resolve SPM Dependencies","alwaysRun":false,"continueOnError":false,"condition":"succeeded()","enabled":true,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"inputs":{"targetType":"inline","filePath":"","arguments":"","script":"xcodebuild -resolvePackageDependencies -workspace $(IO.WorkSpaceName) -scheme $(IO.Scheme) -disableAutomaticPackageResolution","workingDirectory":"","failOnStderr":"false","bashEnvValue":""},"task":{"id":"6c731c3c-3c68-459a-a5c9-bde6e6595b5b","versionSpec":"3.*","definitionType":"task"}},{"environment":{},"displayName":"Swift Lint","alwaysRun":false,"continueOnError":false,"condition":"succeeded()","enabled":true,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"inputs":{"targetType":"inline","filePath":"","arguments":"","script":"cd \"Libraries/WeLoklLib/WeLoklLib\"\nswift package plugin ioswiftlint --target WeLoklLib","workingDirectory":"","failOnStderr":"false","bashEnvValue":""},"task":{"id":"6c731c3c-3c68-459a-a5c9-bde6e6595b5b","versionSpec":"3.*","definitionType":"task"}},{"environment":{},"displayName":"Xcode Archive","alwaysRun":false,"continueOnError":false,"condition":"succeeded()","enabled":true,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"inputs":{"actions":"archive","configuration":"$(IO.Environment)","sdk":"$(IO_PLATFORM_SDK)","xcWorkspacePath":"$(IO.WorkSpaceName)","scheme":"$(IO.Scheme)","xcodeVersion":"default","xcodeDeveloperDir":"","packageApp":"true","archivePath":"archive","exportPath":"output","exportOptions":"plist","exportMethod":"$(IO.ExportMethod)","exportTeamId":"$(IO.TeamID)","exportOptionsPlist":"ExportOptions/ExportOptions-$(IO.Environment).plist","exportArgs":"","signingOption":"default","signingIdentity":"$(IOAppleCertificate.signingIdentity)","provisioningProfileUuid":"$(IOAppleProvisionProfile.provisioningProfileUuid)","provisioningProfileName":"$(IOAppleProvisionProfile.provisioningProfileName)","teamId":"","destinationPlatformOption":"default","destinationPlatform":"","destinationTypeOption":"simulators","destinationSimulators":"","destinationDevices":"","args":"-skipPackagePluginValidation -disableAutomaticPackageResolution","cwd":"","useXcpretty":"false","xcprettyArgs":"","publishJUnitResults":"false","testRunTitle":""},"task":{"id":"1e78dc1b-9132-4b18-9c75-0e7ecc634b74","versionSpec":"5.*","definitionType":"task"}},{"environment":{},"displayName":"Create dSYMs","alwaysRun":false,"continueOnError":true,"condition":"succeeded()","enabled":true,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"inputs":{"rootFolderOrFile":"archive/$(IO.ArchiveName)/dSYMs","includeRootFolder":"false","archiveType":"zip","sevenZipCompression":"5","tarCompression":"gz","archiveFile":"output/dSYMs.zip","replaceExistingArchive":"true","verbose":"false","quiet":"false"},"task":{"id":"d8b84976-e99a-4b86-b885-4849694435b0","versionSpec":"2.*","definitionType":"task"}},{"environment":{},"displayName":"Copy Files to: iOS Package","alwaysRun":false,"continueOnError":false,"condition":"succeeded()","enabled":true,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"inputs":{"SourceFolder":"","Contents":"output/*.ipa\noutput/dSYMs.zip","TargetFolder":"$(build.artifactStagingDirectory)/$(IO.ArtifactName)","CleanTargetFolder":"false","OverWrite":"false","flattenFolders":"false","preserveTimestamp":"false","retryCount":"0","delayBetweenRetries":"1000","ignoreMakeDirErrors":"false"},"task":{"id":"5bfb729a-a7c8-4a78-a7c3-8d717bb7c13c","versionSpec":"2.*","definitionType":"task"}},{"environment":{},"displayName":"Publish Artifact: iOS Package","alwaysRun":false,"continueOnError":false,"condition":"succeeded()","enabled":true,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"inputs":{"PathtoPublish":"$(Build.ArtifactStagingDirectory)/$(IO.ArtifactName)","ArtifactName":"$(IO.ArtifactName)","ArtifactType":"Container","TargetPath":"","Parallel":"false","ParallelCount":"8","FileCopyOptions":"","StoreAsTar":"false"},"task":{"id":"2ff763a7-ce83-4e1f-bc89-0ae63477cebe","versionSpec":"1.*","definitionType":"task"}}],"runsOn":["Agent","DeploymentGroup"],"revision":22,"createdBy":{"displayName":"ilker özcan","id":"1d7d19a0-4ea4-431c-9244-4cf47c199998","uniqueName":"iletisim@ilkerozcan.com.tr"},"createdOn":"2021-04-28T18:19:46.213Z","modifiedBy":{"displayName":"ilker özcan","id":"1d7d19a0-4ea4-431c-9244-4cf47c199998","uniqueName":"iletisim@ilkerozcan.com.tr"},"modifiedOn":"2023-04-23T06:41:08.827Z","comment":"","id":"dfc8338d-eebd-4282-9632-7e6d4edaf8a6","name":"tg-build-ios-01","version":{"major":1,"minor":0,"patch":0,"isTest":false},"iconUrl":"https://cdn.vsassets.io/v/M178_20201207.7/_content/icon-meta-task.png","friendlyName":"tg-build-ios-01","description":"","category":"Build","definitionType":"metaTask","author":"ilker özcan","demands":[],"groups":[],"inputs":[{"aliases":[],"options":{},"properties":{},"name":"IO_PLATFORM_SDK","label":"IO_PLATFORM_SDK","defaultValue":"$(IO_PLATFORM_SDK)","required":true,"type":"string","helpMarkDown":"Specify an SDK to use when building the Xcode project or workspace. From the macOS Terminal application, run `xcodebuild -showsdks` to display the valid list of SDKs. The default value of this field is the variable `$(SDK)`. When using a variable, make sure to specify a value (for example, `iphonesimulator`) on the **Variables** tab.","groupName":""},{"aliases":[],"options":{},"properties":{},"name":"IO.ArchiveName","label":"IO.ArchiveName","defaultValue":"$(IO.ArchiveName)","required":true,"type":"string","helpMarkDown":"","groupName":""},{"aliases":[],"options":{},"properties":{},"name":"IO.ArtifactName","label":"IO.ArtifactName","defaultValue":"$(IO.ArtifactName)","required":true,"type":"string","helpMarkDown":"","groupName":""},{"aliases":[],"options":{},"properties":{},"name":"IO.Environment","label":"IO.Environment","defaultValue":"$(IO.Environment)","required":true,"type":"string","helpMarkDown":"Enter the Xcode project or workspace configuration to be built. The default value of this field is the variable `$(Configuration)`. When using a variable, make sure to specify a value (for example, `Release`) on the **Variables** tab.","groupName":""},{"aliases":[],"options":{},"properties":{},"name":"IO.Scheme","label":"IO.Scheme","defaultValue":"$(IO.Scheme)","required":true,"type":"string","helpMarkDown":"(Optional) Enter a scheme name defined in Xcode. It must be a shared scheme, with its <strong>Shared</strong> checkbox enabled under <strong>Managed Schemes</strong> in Xcode. If you specify a <strong>Workspace or project path</strong> above without specifying a scheme, and the workspace has a single shared scheme, it will be automatically used.","groupName":""},{"aliases":[],"options":{},"properties":{},"name":"IO.WorkSpaceName","label":"IO.WorkSpaceName","defaultValue":"$(IO.WorkSpaceName)","required":true,"type":"string","helpMarkDown":"","groupName":""},{"aliases":[],"options":{},"properties":{},"name":"xcodebuild -showsdks -json","label":"xcodebuild -showsdks -json","defaultValue":"$(IO_PLATFORM_SDK)","required":true,"type":"string","helpMarkDown":"","groupName":""}],"satisfies":[],"sourceDefinitions":[],"dataSourceBindings":[],"instanceNameFormat":"Task group: tg-build-ios-01 $(IO_PLATFORM_SDK)","preJobExecution":{},"execution":{},"postJobExecution":{},"_buildConfigMapping":{}}